<html>
<title>
    Test
</title>

<body>
    <img src="http://localhost/flag" id="flag" onerror=draw();>
    <canvas id="pls"></canvas>
    <script>
        function draw() {
            const img = document.getElementById('flag');

            const cvs = document.getElementById('pls');
            cvs.width = img.width;
            cvs.height = img.height;
            cvs.getContext('2d').drawImage(img, img.height, img.width);



            const pixelData = cvs.getImageData(0, 0, img.height, img.width);
            const dataUri = cvs.toDataURL();
            console.log(dataUri);
        }
    </script>
</body>

</html>